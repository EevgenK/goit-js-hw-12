{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst getPixabayApi = async (request,pageNumber=1) => {\n  try {\n    const resp = await axios.get('', {\n      params: {\n        key: '45547752-43a0cb06c467be16aeef39c83',\n        q: request,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: '15',\n        page: pageNumber,\n      },\n    });\n    return resp.data;\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nexport { getPixabayApi };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst render = (element, obj) => {\n  const markup = obj\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        \n        <ul class=\"info-list\">\n          <li class=\"info-item\"><b>Likes</b>\n          <span>${likes}</span></li>\n          <li class=\"info-item\"><b>Views</b>\n          <span>${views}</span></li>\n          <li class=\"info-item\"><b>Comments</b>\n          <span>${comments}</span></li>\n          <li class=\"info-item\"><b>Downloads\n          <span></b>${downloads}</span></li>\n        </ul>\n        </a>\n      </li>`\n    )\n    .join('');\n  element.insertAdjacentHTML('beforeend', markup);\n};\nconst renderLoader = element => {\n  const markup = `<span class=\"loader visible\"></span>`;\n  element.insertAdjacentHTML('afterend', markup);\n};\nconst clearMarkup = element => (element.innerHTML = '');\nconst errorMessege = str =>\n  iziToast.error({\n    message: str,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#FAFAFB',\n    iconUrl:\n      'https://raw.githubusercontent.com/EevgenK/goit-js-hw-11/main/src/img/error.png',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    maxWidth: '432px',\n    theme: 'dark',\n  });\nconst warningMessage = str =>\n  iziToast.warning({\n    message: str,\n    backgroundColor: '#4e75ff',\n    messageColor: '#FAFAFB',\n    position: 'topRight',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    maxWidth: '432px',\n    theme: 'dark',\n  });\nconst makeVisible = el => el.classList.add('visible');\nconst makeUnvisible = el => el.classList.remove('visible');\n\nexport {\n  render,\n  clearMarkup,\n  renderLoader,\n  errorMessege,\n  warningMessage,\n  makeVisible,\n  makeUnvisible,\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPixabayApi } from './js/pixabay-api';\nimport {\n  render,\n  clearMarkup,\n  renderLoader,\n  errorMessege,\n  warningMessage,\n  makeVisible,\n  makeUnvisible,\n} from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadBtn: document.querySelector('.load'),\n};\nlet page = 1;\nlet searchedEl = '';\nlet loader;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  /* options */\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst smoothScroll = () => {\n  let cardHeight = refs.gallery.firstChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nconst onLoadBtnClick = e => {\n  page += 1;\n  makeVisible(loader);\n  getPixabayApi(searchedEl, page)\n    .then(({ hits, totalHits }) => {\n      render(refs.gallery, hits);\n      lightbox.refresh();\n      smoothScroll();\n      if (refs.gallery.children.length === totalHits) {\n        makeUnvisible(refs.loadBtn);\n        warningMessage(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n    })\n    .catch(err =>\n      errorMessege('Ooops... Something go wrong. Please, try again later')\n    )\n    .finally(() => {\n      makeUnvisible(loader);\n    });\n};\nconst onSearch = e => {\n  e.preventDefault();\n  makeUnvisible(refs.loadBtn);\n  const targetForm = e.currentTarget;\n  searchedEl = targetForm.input.value.trim();\n  if (!searchedEl) {\n    return errorMessege(\n      `There's nothing to search. Please, type the query target first!`\n    );\n  }\n  renderLoader(refs.loadBtn);\n  loader = document.querySelector('.loader');\n  clearMarkup(refs.gallery);\n  getPixabayApi(searchedEl)\n    .then(({ hits }) => {\n      if (hits.length > 0) {\n        render(refs.gallery, hits);\n        lightbox.refresh();\n      } else {\n        errorMessege(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      }\n    })\n    .then(() => {\n      makeVisible(refs.loadBtn);\n      refs.loadBtn.addEventListener('click', onLoadBtnClick);\n    })\n    .catch(err =>\n      errorMessege('Ooops... Something go wrong. Please, try again later')\n    )\n    .finally(() => {\n      loader.classList.remove('visible');\n      targetForm.reset();\n    });\n};\n\nrefs.form.addEventListener('submit', onSearch);\n"],"names":["axios","getPixabayApi","request","pageNumber","error","render","element","obj","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderLoader","clearMarkup","errorMessege","str","iziToast","warningMessage","makeVisible","el","makeUnvisible","refs","page","searchedEl","loader","lightbox","SimpleLightbox","smoothScroll","cardHeight","onLoadBtnClick","hits","totalHits","err","onSearch","targetForm"],"mappings":"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"}