{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst getPixabayApi = async (request, pageNumber, renderdElems = 15) => {\n  try {\n    const resp = await axios.get('', {\n      params: {\n        key: '45547752-43a0cb06c467be16aeef39c83',\n        q: request,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: renderdElems,\n        page: pageNumber,\n      },\n    });\n    return resp.data;\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nexport { getPixabayApi };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst render = (element, obj) => {\n  const markup = obj\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        \n        <ul class=\"info-list\">\n          <li class=\"info-item\"><b>Likes</b>\n          <span>${likes}</span></li>\n          <li class=\"info-item\"><b>Views</b>\n          <span>${views}</span></li>\n          <li class=\"info-item\"><b>Comments</b>\n          <span>${comments}</span></li>\n          <li class=\"info-item\"><b>Downloads\n          <span></b>${downloads}</span></li>\n        </ul>\n        </a>\n      </li>`\n    )\n    .join('');\n  element.insertAdjacentHTML('beforeend', markup);\n};\nconst renderLoader = element => {\n  const markup = `<span class=\"loader visible\"></span>`;\n  element.insertAdjacentHTML('afterend', markup);\n};\nconst clearMarkup = element => (element.innerHTML = '');\nconst errorMessege = str =>\n  iziToast.error({\n    message: str,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#FAFAFB',\n    iconUrl:\n      'https://raw.githubusercontent.com/EevgenK/goit-js-hw-11/main/src/img/error.png',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    maxWidth: '432px',\n    theme: 'dark',\n  });\nconst warningMessage = str =>\n  iziToast.warning({\n    message: str,\n    backgroundColor: '#4e75ff',\n    messageColor: '#FAFAFB',\n    position: 'topRight',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    maxWidth: '432px',\n    theme: 'dark',\n  });\nconst makeVisible = el => el.classList.add('visible');\nconst makeUnvisible = el => el.classList.remove('visible');\n\nexport {\n  render,\n  clearMarkup,\n  renderLoader,\n  errorMessege,\n  warningMessage,\n  makeVisible,\n  makeUnvisible,\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPixabayApi } from './js/pixabay-api';\nimport {\n  render,\n  clearMarkup,\n  renderLoader,\n  errorMessege,\n  warningMessage,\n  makeVisible,\n  makeUnvisible,\n} from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadBtn: document.querySelector('.load'),\n  loader: '',\n};\nconst renderdElems = 15;\nlet page = 1;\nlet searchedEl = '';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst smoothScroll = () => {\n  let cardHeight = refs.gallery.firstChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\nconst calculatedPages = (totalHits, page) => totalHits / renderdElems / page;\nconst makeFirtsRender = async () => {\n  try {\n    const { hits, totalHits } = await getPixabayApi(searchedEl, page);\n    makeUnvisible(refs.loader);\n    if (hits.length <= 0) {\n      return errorMessege(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    calculatedPages(totalHits, page) > 1 && makeVisible(refs.loadBtn);\n    render(refs.gallery, hits);\n    lightbox.refresh();\n    refs.form.reset();\n  } catch (error) {\n    errorMessege('Ooops... Something go wrong. Please, try again later');\n  }\n  makeUnvisible(refs.loader);\n};\n\nconst makeloadMoreRender = async () => {\n  try {\n    const { hits, totalHits } = await getPixabayApi(searchedEl, page);\n    if (calculatedPages(totalHits, page) <= 1) {\n      makeUnvisible(refs.loadBtn);\n      warningMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    } else {\n      makeVisible(refs.loadBtn);\n    }\n    render(refs.gallery, hits);\n    lightbox.refresh();\n    smoothScroll();\n  } catch (error) {\n    errorMessege('Ooops... Something go wrong. Please, try again later');\n  }\n  makeUnvisible(refs.loader);\n};\n\nconst onLoadBtnClick = e => {\n  page += 1;\n  makeUnvisible(refs.loadBtn);\n  makeVisible(refs.loader);\n  makeloadMoreRender();\n  // ----------------------IF TO USE THEN-CATCH-FINALY METHOD--------------------------\n  // getPixabayApi(searchedEl, page)\n  //   .then(({ hits, totalHits }) => {\n  //     render(refs.gallery, hits);\n  //     lightbox.refresh();\n  //     smoothScroll();\n  //     if (refs.gallery.children.length === totalHits) {\n  //       makeUnvisible(refs.loadBtn);\n  //       warningMessage(\n  //         \"We're sorry, but you've reached the end of search results.\"\n  //       );\n  //     }\n  //   })\n  //   .catch(err =>\n  //     errorMessege('Ooops... Something go wrong. Please, try again later')\n  //   )\n  //   .finally(() => {\n  //     makeUnvisible(refs.loader);\n  //   });\n  // -------------------------------------------------------------------------------------\n};\n\nconst onSearch = e => {\n  e.preventDefault();\n  page = 1;\n  makeUnvisible(refs.loadBtn);\n  searchedEl = e.currentTarget.input.value.trim();\n  if (!searchedEl) {\n    return errorMessege(\n      `There's nothing to search. Please, type the query target first!`\n    );\n  }\n  renderLoader(refs.loadBtn);\n  refs.loader = document.querySelector('.loader');\n  clearMarkup(refs.gallery);\n  makeFirtsRender();\n\n  // ----------------------IF TO USE THEN-CATCH-FINALY METHOD--------------------------\n  // getPixabayApi(searchedEl)\n  //   .then(({ hits }) => {\n  //     if (hits.length > 0) {\n  //       render(refs.gallery, hits);\n  //       lightbox.refresh();\n  //     } else {\n  //       errorMessege(\n  //         'Sorry, there are no images matching your search query. Please try again!'\n  //       );\n  //     }\n  //   })\n  //   .then(() => {\n  //     makeVisible(refs.loadBtn);\n\n  //   })\n  //   .catch(err =>\n  //     errorMessege('Ooops... Something go wrong. Please, try again later')\n  //   )\n  //   .finally(() => {\n  //     makeUnvisible(refs.loader);\n  //     targetForm.reset();\n  //   });\n  // -------------------------------------------------------------------------------------\n};\n\nrefs.loadBtn.addEventListener('click', onLoadBtnClick);\nrefs.form.addEventListener('submit', onSearch);\n"],"names":["axios","getPixabayApi","request","pageNumber","renderdElems","error","render","element","obj","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderLoader","clearMarkup","errorMessege","str","iziToast","warningMessage","makeVisible","el","makeUnvisible","refs","page","searchedEl","lightbox","SimpleLightbox","smoothScroll","cardHeight","calculatedPages","totalHits","makeFirtsRender","hits","makeloadMoreRender","onLoadBtnClick","onSearch"],"mappings":"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"}